# ExtraTextAreas for MODX 3.1+

Компонент добавляет дополнительные текстовые области на вкладку редактирования ресурса и хранит значения в отдельных таблицах.

## Возможности

- Управление списком дополнительных полей в разделе **Компоненты → ExtraTextAreas**.
- Автоматическая подгрузка активных полей на вкладку контента ресурса.
- Сохранение контента и выбранного редактора для каждого дополнительного поля.
- Авто-обнаружение доступных редакторов по активным плагинам системы (Ace/CKEditor/Tiny и т.п.).
- Упаковка в `transport package` для установки через **Установщик**.

## Структура хранения

- `modx_extratextareas_fields` — описание полей (имя, подпись, сортировка, активность).
- `modx_extratextareas_values` — контент полей по ресурсам (`resource_id + field_id`, плюс выбранный редактор).

## Как собрать пакет для Установщика

> Важно: Установщик MODX принимает **только файл** `*.transport.zip`, а не исходники репозитория.

### Вариант 1 (если репозиторий находится в корне сайта MODX)

```bash
php _build/build.transport.php
```

### Вариант 2 (если репозиторий лежит отдельно)

Укажите путь до корня MODX через переменную окружения:

```bash
MODX_BASE_PATH=/path/to/your/modx php _build/build.transport.php
```

Скрипт проверит наличие `config.core.php` и соберёт пакет. После этого:

1. Найдите файл `extratextareas-<version>-<release>.transport.zip` в директории пакетов MODX.
2. Загрузите его в **Менеджер → Установщик**.
3. Откройте **Компоненты → ExtraTextAreas** и создайте нужные дополнительные области.

## Что устанавливается пакетом

- Namespace `extratextareas`
- CMP (меню + action)
- Плагин `ExtraTextAreas` с событиями `OnDocFormRender` и `OnDocFormSave`
- Файлы из `core/components/extratextareas/` и `assets/components/extratextareas/`
- Таблицы `extratextareas_fields` и `extratextareas_values` (через resolver)

## Текущее ограничение

Выбор редактора по каждому полю сохраняется в БД, но жёсткая инициализация конкретного editor API для каждого textarea может потребовать адаптеров под конкретные редакторные дополнения.
